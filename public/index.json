
[{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/","section":"","summary":"","title":"","type":"page"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/tags/arm64/","section":"Tags","summary":"","title":"Arm64","type":"tags"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/tags/kali/","section":"Tags","summary":"","title":"Kali","type":"tags"},{"content":"This guide is based on macOS 14.4, UTM 4.4.6 and Kali Linux 2024.1-arm64.\nFirst Post! UTM, a macOS-specific virtualization tool, offers cybersecurity enthusiasts a solution for running diverse operating systems like Kali Linux on Apple Silicon MacBooks, filling the gap left by incompatible traditional options such as VirtualBox.\nStep 1: Install UTM # Download the .dmg file from https://mac.getutm.app/ and install it.\nStep 2: Get Kali Linux Installer Image for ARM # Go to https://www.kali.org/get-kali/#kali-installer-images to download the latest official installer image. Make sure to choose “Apple Silicon (ARM64)”. You can choose offline or online installer image per your needs, but the offline image is recommended for simplicity.\nAfter downloading, you should have an .iso file on your disk.\nStep 3: Create A VM Using the Image # Tips: During setup, UTM might ask for system permissions multiple times; please grant them. Most VM settings can be adjusted post-creation, so initial setup needn’t be time-consuming.\nOpen UTM. Click the “+” button to create a new VM. Then select “Virtualize”. Select “Other”. Click “Browse” to select the .iso file you just downloaded, and then click “Continue”. Leave Memory and CPU settings as default. Click “Continue”. Decide the disk space for Kali Linux. Kali’s docs recommends ≥ 20GB on the higher end. Then click “Continue”. Set up a shared directory path if needed. This allows sharing files between the host and the virtual client. Let’s skip it for now and click “Continue”. Tips: To make directory-sharing work, you need to install some software later in the virtual machine guest, which will be mentioned later.\nReview the summary, choose a nickname for this VM, and click “Save”. Now your should see the new virtual machine on the left. Step 4: Boot and Install Kali Linux # Tips: The following sub-steps are complex and require careful attention.\nRight click the new VM and select “Edit”. Due to a bug on UTM, we need to install Kali in console-only mode. Firstly, in the devices list, right click the current Display and select “Remove”. Then select “+ New…” and add a “Serial” device. This will give us a console GUI during the the boot. Remove the existing “Display” device\nAdd a new “Serial” device\nAfter the “Serial” device is added, click “Save”. Now run the VM. It should open a console window, where we will proceed with the installation of Kali Linux. Use your keyboard navigate within this window (e.g, arrow keys to move between options and Enter key to select). Select “Install”. Follow the instructions to set up language, region, timezone, etc. You can customize your hostname, username, and password as needed. For optional settings like “domain” and “full name”, you can leave them blank. When you reach the “Partition disks” step, select “Guided — use entire disk” → “Virtual disk 1” → “All files in one partition” → “Finish partitioning and write changes to disk” → “Yes”. In the “Software Selection” step, select the default option, “Xfce”. The installation of software packages will take approximately 10 minutes to finish. DO NOT perform any actions after it finishes; instead, carefully follow the next sub-step. When you reach the “Finish the Installation” step, DO NOT select “Continue”. Instead, return to UTM’s main window, select your VM on the left, and then scroll down to the bottom on the right side. Select “CD/DVD” and click “Clear”. This action mimics ejecting the installation drive (the .iso file), ensuring that the next reboot will load the installed system instead of booting from the installation drive again. 11. Right click your VM and select “Stop”.\nEdit your VM to remove the “Serial” device. Then, add a new “Display” device, selecting the “virtio-gpu-pci” option. Then save the settings and run the machine. Log in using your username and password. Your Kali Linux VM is now up and running! However, a few additional setups are required to further enhance the user experience. Step 5: Enable Dynamic Resolution \u0026amp; Clipboard Sharing # Dynamic resolution is a feature that enables the VM’s display resolution to automatically adjust to match the size of the UTM window as it changes. Clipboard sharing facilitates copying and pasting to and from the VM. To support these two features, we will need to install a Linux package called spice-vdagent.\nLaunch the virtual machine (VM) and log into Kali Linux. Open the “Terminal Emulator” application. Enter the following commands: sudo apt install spice-vdagent Once the installation is complete, restart the VM.\n**spice-vdagent**should now be running as a systemd service in the background. Test the setup by copying and pasting to or from the VM; it should function seamlessly.\nHowever, you may encounter issues with dynamic resolution not functioning. Now you can diagnose using below command:\nsudo systemctl status spice-vdagent If you notice error messages such as invalid message size for VDAgentMonitorsConfig, this indicates a known bug in UTM. To work around this issue, you can manually trigger a resolution adjustment by executing the following command: xrandr --output Virtual-1 --auto\nTo avoid the hassle of manually running the command every time you change the window size, you can set up a background service to automate the process. Use the below commands, and remember to replace YOUR_USER_NAME in the script with your actual username: # 1. Create a script to watch error messages from spice-vdagentd and execute the fix command sudo tee /usr/local/bin/auto_adjust_resolution.sh \u0026gt; /dev/null \u0026lt;\u0026lt; \u0026#39;EOF\u0026#39; #!/bin/bash journalctl -fu spice-vdagentd | grep --line-buffered \u0026#34;invalid message size\u0026#34; | while read line ; do xrandr --output Virtual-1 --auto done EOF # 2. Make the script executable sudo chmod +x /usr/local/bin/auto_adjust_resolution.sh # 3. Create a systemd service to keep the script running in the background sudo tee /etc/systemd/system/auto_adjust_resolution.service \u0026gt; /dev/null \u0026lt;\u0026lt; \u0026#39;EOF\u0026#39; [Unit] Description=Monitor spice-vdagentd logs for \u0026#34;invalid message size\u0026#34; and adjust display After=network.target [Service] Type=simple User=YOUR_USER_NAME Environment=\u0026#34;DISPLAY=:0\u0026#34; ExecStart=/usr/local/bin/auto_adjust_resolution.sh Restart=on-failure [Install] WantedBy=multi-user.target EOF # 4. Register and start the service sudo systemctl daemon-reload sudo systemctl enable auto_adjust_resolution.service sudo systemctl start auto_adjust_resolution.service # 5. Check if the service is up and running sudo systemctl status auto_adjust_resolution.service To test the setup, resize the UTM’s VM window. The resolution inside the VM should adjust promptly to match the window size.\nStep 6: Enable Directory Sharing # Directory sharing facilitates the sharing of a directory from the host system with the virtual machine (VM). This functionality depends on the Linux package spice-webdavd. Follow the steps below to set it up: Open the Terminal in Kali Linux and run the following command to install spice-webdavd:\nsudo apt install spice-webdavd Stop the VM to access its “Sharing” configuration section. Ensure the “Directory Share Mode” is set to “SPICE WebDAV”. Click “Browse” to select the directory on the host system that you wish to share with the VM. And after that, click “Save” to apply the changes. Now the URL http://localhost:9843 is pointing to the SPICE WebDAV server running on the VM. You can access the files using a web browser or a WebDAV client within the VM. Step 7: Congratulations 🎉 # ","date":"5 October 2024","externalUrl":null,"permalink":"/posts/tech/kali-vm-arm64/","section":"Posts","summary":"","title":"Kali Linux on Apple Silicon [2024]","type":"posts"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/tags/linux/","section":"Tags","summary":"","title":"Linux","type":"tags"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/tags/macos/","section":"Tags","summary":"","title":"MacOS","type":"tags"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/categories/tech/","section":"Categories","summary":"","title":"Tech","type":"categories"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/tags/utm/","section":"Tags","summary":"","title":"UTM","type":"tags"},{"content":"","date":"5 October 2024","externalUrl":null,"permalink":"/tags/virtual-machines/","section":"Tags","summary":"","title":"Virtual Machines","type":"tags"},{"content":" Interests DevSecOps Cyber Threat Intelligence Reverse Engineering Values Attention to detail Adaptability Proper Documentation \u0026amp; SOPs Hobbies FPV Drones Sim Racing Graphic Design ","date":"4 October 2024","externalUrl":null,"permalink":"/about/","section":"","summary":"","title":"About","type":"page"},{"content":"","date":"4 October 2024","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"2 October 2024","externalUrl":null,"permalink":"/tags/assignment/","section":"Tags","summary":"","title":"Assignment","type":"tags"},{"content":"","date":"2 October 2024","externalUrl":null,"permalink":"/tags/m110/","section":"Tags","summary":"","title":"M110","type":"tags"},{"content":"","date":"2 October 2024","externalUrl":null,"permalink":"/categories/placeholder/","section":"Categories","summary":"","title":"Placeholder","type":"categories"},{"content":" Download as PDF Experience Company Link Role Dates Location GRNET / ΕΔΥΤΕ IT Security Engineer 2024 - Present Remote Athens, GR NOC Support 2022 - 2024 Remote Athens, GR University of Athens Teaching Assistant\n@ Data Security \u0026 Privacy 2023 - 2024 Onsite Athens, GR Education University Link Degree Dates University of Athens MSc, Computer Systems 2024 - Present BSc, Business Administration 2019-2024 AUEB | Coding Factory Software Engineering Bootcamp (8 months) 2023 Certifications Show Credentials Organization Link Certification Date ISC2 CC (Certified in Cybersecurity) 2024 TU Delft Unix Tools: Data, Software and Production Engineering 2023 arcX Cyber Threat Intelligence 101 2023 linq Cybersecurity - Penetration Testing 2023 Google Web Analytics Advanced 2023 ","date":"2 October 2024","externalUrl":null,"permalink":"/resume/","section":"","summary":"","title":"Resume","type":"page"},{"content":"","date":"2 October 2024","externalUrl":null,"permalink":"/posts/tech/test-post/","section":"Posts","summary":"","title":"Tech Post","type":"posts"},{"content":"","date":"2 October 2024","externalUrl":null,"permalink":"/categories/university/","section":"Categories","summary":"","title":"University","type":"categories"},{"content":"\n","date":"2 October 2024","externalUrl":null,"permalink":"/posts/university/test-post/","section":"Posts","summary":"","title":"University Post","type":"posts"},{"content":" p3rception/GlassFox // transluscent firefoxcss theme CSS 18 1 p3rception/Indigo-zed // theme for zed - 2k downloads null 3 4 p3rception/dotfiles // terminal .config files Shell 23 1 p3rception/PyNaut // python port scanner Python 0 0 p3rception/NeoNote // Task-management Django App Python 0 0 p3rception/Thunderbird-Sieve-Converter Converts Thunderbird email filter rules to Sieve rules Python 0 0 ","date":"13 June 2022","externalUrl":null,"permalink":"/projects/","section":"","summary":"","title":"Projects","type":"page"},{"content":"","date":"10 July 1856","externalUrl":null,"permalink":"/categories/other/","section":"Categories","summary":"","title":"Other","type":"categories"},{"content":"\n","date":"10 July 1856","externalUrl":null,"permalink":"/posts/other/test-post/","section":"Posts","summary":"","title":"Other Post","type":"posts"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]